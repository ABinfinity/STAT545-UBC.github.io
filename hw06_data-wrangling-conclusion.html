<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Homework 06: Data wrangling wrap up</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>
<link href="libs/highlightjs-1.1/default.css" rel="stylesheet" />
<script src="libs/highlightjs-1.1/highlight.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-68219208-1', 'auto');
  ga('send', 'pageview');

</script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="libs/local/main.css" type="text/css" />
<link rel="stylesheet" href="libs/local/nav.css" type="text/css" />
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>



<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->





<header>
  <div class="nav">
    <a class="nav-logo" href="index.html">
      <img src="static/img/stat545-logo-s.png" width="70px" height="70px"/>
    </a>
    <ul>
      <li class="home"><a href="index.html">Home</a></li>
      <li class="faq"><a href="faq.html">FAQ</a></li>
      <li class="syllabus"><a href="syllabus.html">Syllabus</a></li>
      <li class="topics"><a href="topics.html">Topics</a></li>
      <li class="people"><a href="people.html">People</a></li>
    </ul>
  </div>
</header>

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Homework 06: Data wrangling wrap up</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#character-data">1. Character data</a></li>
<li><a href="#writing-functions">2. Writing functions</a></li>
<li><a href="#work-with-the-candy-data">3. Work with the candy data</a></li>
<li><a href="#work-with-the-singer-data">4. Work with the <code>singer</code> data</a></li>
<li><a href="#work-with-a-list">5. Work with a list</a></li>
<li><a href="#work-with-a-nested-data-frame">6. Work with a nested data frame</a></li>
<li><a href="#report-your-process">Report your process</a></li>
<li><a href="#submit-the-assignment">Submit the assignment</a></li>
<li><a href="#rubric">Rubric</a></li>
</ul>
</div>

<div id="overview" class="section level3">
<h3>Overview</h3>
<p>Consult the <a href="hw00_homework-guidelines.html">general homework guidelines</a>.</p>
<p>Due anytime Wednesday 2017-11-08.</p>
<p>Pick (at least) two of the six (numbered) topics below and do one of the exercise prompts listed, or something comparable using your dataset of choice.</p>
</div>
<div id="character-data" class="section level3">
<h3>1. Character data</h3>
<p>Read and work the exercises in the <a href="http://r4ds.had.co.nz/strings.html">Strings chapter</a> or R for Data Science.</p>
</div>
<div id="writing-functions" class="section level3">
<h3>2. Writing functions</h3>
<p>Pick one:</p>
<ul>
<li>Write one (or more) functions that do something useful to pieces of the Gapminder or Singer data. It is logical to think about computing on the mini-data frames corresponding to the data for each specific country, location, year, band, album, … This would pair well with the prompt below about working with a nested data frame, as you could apply your function there.
<ul>
<li>Make it something you can’t easily do with built-in functions. Make it something that’s not trivial to do with the simple <code>dplyr</code> verbs. The linear regression function <a href="block012_function-regress-lifeexp-on-year.html">presented here</a> is a good starting point. You could generalize that to do quadratic regression (include a squared term) or use robust regression, using <code>MASS::rlm()</code> or <code>robustbase::lmrob()</code>.</li>
</ul></li>
<li>If you plan to complete the homework where we build an R package, write a couple of experimental functions exploring some functionality that is useful to you in real life and that might form the basis of your personal package.</li>
</ul>
</div>
<div id="work-with-the-candy-data" class="section level3">
<h3>3. Work with the candy data</h3>
<p>In 2015, we explored a dataset based on a Halloween candy survey (but it included many other odd and interesting questions). Work on something from <a href="hw07_2015_data-wrangling-candy.html">this homework from 2015</a>. It is good practice on basic data ingest, exploration, character data cleanup, and wrangling.</p>
</div>
<div id="work-with-the-singer-data" class="section level3">
<h3>4. Work with the <code>singer</code> data</h3>
<p>The <code>singer_location</code> dataframe in the <code>singer</code> package contains geographical information stored in two different formats: 1. as a (dirty!) variable named <code>city</code>; 2. as a latitude / longitude pair (stored in <code>latitude</code>, <code>longitude</code> respectively). The function <code>revgeocode</code> from the <code>ggmap</code> library allows you to retrieve some information for a pair (vector) of longitude, latitude (warning: notice the order in which you need to pass lat and long). Read its manual page.</p>
<ol style="list-style-type: decimal">
<li>Use <code>purrr</code> to map latitude and longitude into human readable information on the band’s origin places. Notice that <code>revgeocode(... , output = &quot;more&quot;)</code> outputs a dataframe, while <code>revgeocode(... , output = &quot;address&quot;)</code> returns a string: you have the option of dealing with nested dataframes.<br />
You will need to pay attention to two things:
<ul>
<li>Not all of the track have a latitude and longitude: what can we do with the missing information? (<em>filtering</em>, …)</li>
<li>Not all of the time we make a research through <code>revgeocode()</code> we get a result. What can we do to avoid those errors to bite us? (look at <em>possibly()</em> in <code>purrr</code>…)</li>
</ul></li>
<li><p>Try to check wether the place in <code>city</code> corresponds to the information you retrieved.</p></li>
<li><p>If you still have time, you can go visual: give a look to the library <a href="https://rstudio.github.io/leaflet"><code>leaflet</code></a> and plot some information about the bands. A snippet of code is provided below.</p>
<pre class="r"><code>singer_locations %&gt;%  
  leaflet()  %&gt;%   
  addTiles() %&gt;%  
  addCircles(popup = ~artist_name)</code></pre></li>
</ol>
</div>
<div id="work-with-a-list" class="section level3">
<h3>5. Work with a list</h3>
<p>Work through and write up a lesson from the <a href="https://jennybc.github.io/purrr-tutorial/index.html">purrr tutorial</a>:</p>
<ul>
<li><a href="https://jennybc.github.io/purrr-tutorial/ls08_trump-tweets.html">Trump Android Tweets</a></li>
<li><a href="https://jennybc.github.io/purrr-tutorial/ls02_map-extraction-advanced.html">Simplifying data from a list of GitHub users</a></li>
</ul>
</div>
<div id="work-with-a-nested-data-frame" class="section level3">
<h3>6. Work with a nested data frame</h3>
<p>Create a nested data frame and map a function over the list column holding the nested data. Use list extraction or other functions to pull interesting information out of these results and work your way back to a simple data frame you can visualize and explore.</p>
<p>Here’s a fully developed prompt for Gapminder:</p>
<ul>
<li>See the <a href="block024_group-nest-split-map.html">split-apply-combine lesson from class</a></li>
<li>Nest the data by country (and continent).</li>
<li>Fit a model of life expectancy against year. Possibly quadratic, possibly robust (see above prompt re: function writing).</li>
<li>Use functions for working with fitted models or the <a href="https://github.com/tidyverse/broom">broom package</a> to get information out of your linear models.</li>
<li>Use the usual dplyr, tidyr, and ggplot2 workflows to explore, e.g., the estimated cofficients.</li>
</ul>
<p>Inspiration for the modelling and downstream inspiration</p>
<ul>
<li>Find countries with interesting stories. - Sudden, substantial departures from the temporal trend is interesting. How could you operationalize this notion of “interesting”?</li>
<li>Use the residuals to detect countries where your model is a terrible fit. Examples: Are there are 1 or more freakishly large residuals, in an absolute sense or relative to some estimate of background variability? Are there strong patterns in the sign of the residuals? E.g., all pos, then all neg, then pos again.</li>
<li>Fit a regression using ordinary least squares and a robust technique. Determine the difference in estimated parameters under the two approaches. If it is large, consider that country “interesting”.</li>
<li>Compare a linear and quadratic fit</li>
</ul>
</div>
<div id="report-your-process" class="section level3">
<h3>Report your process</h3>
<p>You’re encouraged to reflect on what was hard/easy, problems you solved, helpful tutorials you read, etc. Give credit to your sources, whether it’s a blog post, a fellow student, an online tutorial, etc.</p>
</div>
<div id="submit-the-assignment" class="section level3">
<h3>Submit the assignment</h3>
<p>Follow instructions on <a href="hw00_homework-guidelines.html#how-to-submit-homework">How to submit homework</a></p>
</div>
<div id="rubric" class="section level3">
<h3>Rubric</h3>
<p>Check minus: One or more elements are missing or sketchy. Missed opportunities to complement code and numbers with a figure and interpretation. Technical problem that is relatively easy to fix. It’s hard to find the report in this crazy repo.</p>
<p>Check: Hits all the elements. No obvious mistakes. Pleasant to read. No heroic detective work required. Well done! <em>This should be the most typical mark!</em></p>
<p>Check plus: Exceeded the requirements in number of dimensions. Developed novel tasks that were indeed interesting and “worked”. Impressive use of R – maybe involving functions, packages or workflows that weren’t given in class materials. Impeccable organization of repo and report. You learned something new from reviewing their work and you’re eager to incorporate it into your work.</p>
</div>

<div class="footer">
This work is licensed under the  <a href="http://creativecommons.org/licenses/by-nc/3.0/">CC BY-NC 3.0 Creative Commons License</a>.
</div>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
